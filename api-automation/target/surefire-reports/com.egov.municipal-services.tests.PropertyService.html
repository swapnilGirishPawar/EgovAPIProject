<!DOCTYPE html>
<html lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link href="res/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="res/karate-report.css" rel="stylesheet" type="text/css">
    <link href="favicon.ico" rel="shortcut icon">
    <script src="res/jquery.min.js" type="text/javascript"></script>
    <script src="res/jquery.tablesorter.min.js" type="text/javascript"></script>
    <script src="res/bootstrap.min.js" type="text/javascript"></script>
    <script src="res/karate-report.js" type="text/javascript"></script>
    <title>com.egov.municipal-services.tests.PropertyService</title>
  </head>
  <body>
    <div id="root-container">
      <div id="leftnav">
        <div class="nav-logo">
          <a href="karate-summary.html">
            <img alt="Karate" src="res/karate-logo.svg">
          </a>
          <div class="nav-count">
            <div class="bg-success" id="nav-pass">3</div>
            <div class="bg-danger" id="nav-fail">0</div>
          </div>
        </div>
        <div id="nav-type">Scenarios</div>         
        <div id="nav-date">2022-04-26 03:14:25 PM</div>        
      <div class="nav-container"><div class="nav-item passed"><a href="#[47:584]">[47:584] Search Property with valid property details </a></div><div class="nav-item passed"><a href="#[48:598]">[48:598] Search Property without locality </a></div><div class="nav-item passed"><a href="#[49:607]">[49:607] Search Property with invalid property details </a></div></div></div>
      <div id="content">
      <div class="page-heading alert alert-primary"><a href="karate-summary.html">Summary</a><span class="feature-label">|</span><a href="karate-tags.html">Tags</a><span class="feature-label">|</span><span class="feature-label">Feature:</span><span class="feature-name">com/egov/municipal-services/tests/PropertyService.feature</span><span class="feature-description">Property Services</span></div><div class="scenario"><div class="scenario-heading" id="[47:584]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">propertyServices</a><a class="badge badge-primary" href="karate-tags.html">Property_search_By_Valid_PTDetails</a><a class="badge badge-primary" href="karate-tags.html">municipalServices</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">Property_search_By_PTDetails</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">digit_2_7</a><a class="badge badge-primary" href="karate-tags.html">propertyServiceSearch</a></div><span class="scenario-keyword">Scenario: [47:584]</span><span class="scenario-name">Search Property with valid property details </span></div><div class="scenario-time passed">ms: 1512</div></div><div class="step-row"><div class="step-container" id="[47:584]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="1"><div class="step-ref bg-step">1</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">9</div></div><div class="preformatted" data-parent="1">15:14:22.029 karate.env:  
15:14:22.029 locale: en_IN 
15:14:22.030 tenantId: pb.amritsar</div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="2"><div class="step-ref bg-step">2</div><div class="step-cell passed">* def Collections = Java.type('java.util.Collections')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="3"><div class="step-ref bg-step">3</div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="4"><div class="step-ref bg-step">4</div><div class="step-cell passed">* def propertyServicesConstants = read('../../municipal-services/constants/propertyServices.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="5"><div class="step-ref bg-step">5</div><div class="step-cell passed">* def hierarchyTypeCode = commonConstants.parameters.hierarchyTypeCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="6"><div class="step-ref bg-step">6</div><div class="step-cell passed">* def boundaryType = commonConstants.parameters.boundaryType</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># Searching Location for locality and areaCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="7"><div class="step-ref bg-step">7</div><div class="step-cell passed">* call read('../../core-services/pretests/location.feature@searchLocationSuccessfully')</div></div><div class="time-cell passed">322</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="7.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/municipal-services/tests/../../core-services/pretests/location.feature</div></div><div class="time-cell passed">317</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="8"><div class="step-ref bg-step">8</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="9"><div class="step-ref bg-step">9</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="10"><div class="step-ref bg-step">10</div><div class="step-indent"> </div><div class="step-cell passed">* def locationconstant = read('../../core-services/constants/location.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="11"><div class="step-ref bg-step">11</div><div class="step-indent"> </div><div class="step-cell passed">* def locationPayload = read('../../core-services/requestPayload/location/searchLocation.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="12"><div class="step-ref bg-step">12</div><div class="step-indent"> </div><div class="step-cell passed">* def locationParam =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="12">{
 hierarchyTypeCode: '#(hierarchyTypeCode)',
 boundaryType: '#(boundaryType)',
 tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="13"><div class="step-ref bg-step">13</div><div class="step-indent"> </div><div class="step-cell passed">Given url searchloc</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="14"><div class="step-ref bg-step">14</div><div class="step-indent"> </div><div class="step-cell passed">And params locationParam</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="15"><div class="step-ref bg-step">15</div><div class="step-indent"> </div><div class="step-cell passed">And request locationPayload</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="16"><div class="step-ref bg-step">16</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">306</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="17"><div class="step-ref bg-step">17</div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="18"><div class="step-ref bg-step">18</div><div class="step-indent"> </div><div class="step-cell passed">And def searchLocationResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="19"><div class="step-ref bg-step">19</div><div class="step-indent"> </div><div class="step-cell passed">And def searchLocationResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="20"><div class="step-ref bg-step">20</div><div class="step-cell passed">* def localityCode = searchLocationResponseBody.TenantBoundary[0].boundary[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="21"><div class="step-ref bg-step">21</div><div class="step-cell passed">* def areaCode = searchLocationResponseBody.TenantBoundary[0].boundary[0].area</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="22"><div class="step-ref bg-step">22</div><div class="step-cell passed">* def localityName = searchLocationResponseBody.TenantBoundary[0].boundary[0].name + ', ' + cityCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># initialising request payload variables</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="23"><div class="step-ref bg-step">23</div><div class="step-cell passed">* def financialYear = commonConstants.parameters.financialYear</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="24"><div class="step-ref bg-step">24</div><div class="step-cell passed">* def assessmentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">37</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="25"><div class="step-ref bg-step">25</div><div class="step-cell passed">* def source = commonConstants.parameters.source</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="26"><div class="step-ref bg-step">26</div><div class="step-cell passed">* def channel = commonConstants.parameters.channel</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="27"><div class="step-ref bg-step">27</div><div class="step-cell passed">* def relationship = commonConstants.parameters.relationship[randomNumber(commonConstants.parameters.relationship.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="28"><div class="step-ref bg-step">28</div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="29"><div class="step-ref bg-step">29</div><div class="step-cell passed">* def cityName = karate.jsonPath(mdmsStatetenant, "$.tenants[?(@.code=='" + tenantId + "')].name")[0]</div></div><div class="time-cell passed">30</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="30"><div class="step-ref bg-step">30</div><div class="step-cell passed">* def OccupancyType = mdmsStatePropertyTax.OccupancyType[1].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="31"><div class="step-ref bg-step">31</div><div class="step-cell passed">* def UsageCategory = mdmsStatePropertyTax.UsageCategory[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="32"><div class="step-ref bg-step">32</div><div class="step-cell passed">* def builtUpArea = 2000</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="33"><div class="step-ref bg-step">33</div><div class="step-cell passed">* def UsageCategoryMajor = mdmsStatePropertyTax.UsageCategoryMajor[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="34"><div class="step-ref bg-step">34</div><div class="step-cell passed">* def landArea = 800</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="35"><div class="step-ref bg-step">35</div><div class="step-cell passed">* def PropertyType = mdmsStatePropertyTax.PropertyType[3].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="36"><div class="step-ref bg-step">36</div><div class="step-cell passed">* def noOfFloors = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="37"><div class="step-ref bg-step">37</div><div class="step-cell passed">* def OwnerShipCategory = mdmsStatePropertyTax.OwnerShipCategory[3].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="38"><div class="step-ref bg-step">38</div><div class="step-cell passed">* def name = randomString(10)</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="39"><div class="step-ref bg-step">39</div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="40"><div class="step-ref bg-step">40</div><div class="step-cell passed">* def fatherOrHusbandName = randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="41"><div class="step-ref bg-step">41</div><div class="step-cell passed">* def relationship = commonConstants.parameters.relationship[randomNumber(commonConstants.parameters.relationship.length)]</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="42"><div class="step-ref bg-step">42</div><div class="step-cell passed">* def OwnerType = mdmsStatePropertyTax.OwnerType[5].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="43"><div class="step-ref bg-step">43</div><div class="step-cell passed">* def gender = commonConstants.parameters.gender[randomNumber(commonConstants.parameters.gender.length)]</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="44"><div class="step-ref bg-step">44</div><div class="step-cell passed">* def isCorrespondenceAddress = true</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="45"><div class="step-ref bg-step">45</div><div class="step-cell passed">* def source = commonConstants.parameters.source</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="46"><div class="step-ref bg-step">46</div><div class="step-cell passed">* def channel = commonConstants.parameters.channel</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="47"><div class="step-ref bg-step">47</div><div class="step-cell passed">* def addressProofDocumentType0 = mdmsStatePropertyTax.Documents[0].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="48"><div class="step-ref bg-step">48</div><div class="step-cell passed">* def addressProofDocumentType1 = mdmsStatePropertyTax.Documents[1].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="49"><div class="step-ref bg-step">49</div><div class="step-cell passed">* def addressProofDocumentType2 = mdmsStatePropertyTax.Documents[2].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="50"><div class="step-ref bg-step">50</div><div class="step-cell passed">* def addressProofDocumentType3 = mdmsStatePropertyTax.Documents[3].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="51"><div class="step-ref bg-step">51</div><div class="step-cell passed">* def addressProofDocumentType4 = mdmsStatePropertyTax.Documents[4].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="52"><div class="step-ref bg-step">52</div><div class="step-cell passed">* def creationReason = commonConstants.parameters.creationReason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[47:584]bg"><div class="step-container" id="53"><div class="step-ref bg-step">53</div><div class="step-cell passed">* def businessService = mdmsStatePropertyTax.PTWorkflow[1].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Create a property</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="54"><div class="step-ref passed">54</div><div class="step-cell passed">* call read('../../municipal-services/pretests/propertyServicesPretest.feature@createPropertySuccessfully')</div></div><div class="time-cell passed">1015</div></div><div class="step-row"><div class="step-container" id="54.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/municipal-services/tests/../../municipal-services/pretests/propertyServicesPretest.feature</div></div><div class="time-cell passed">980</div></div><div class="step-row"><div class="step-container" id="55"><div class="step-ref passed">55</div><div class="step-indent"> </div><div class="step-cell passed">* def createPropertyRequest = read('../../municipal-services/requestPayload/property-services/create.json')</div></div><div class="time-cell passed">44</div></div><div class="step-row"><div class="step-container" id="56"><div class="step-ref passed">56</div><div class="step-indent"> </div><div class="step-cell passed">* def updatePropertyRequest = read('../../municipal-services/requestPayload/property-services/update.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="57"><div class="step-ref passed">57</div><div class="step-indent"> </div><div class="step-cell passed">* def createAssessmentRequest = read('../../municipal-services/requestPayload/property-services/createAssessment.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="58"><div class="step-ref passed">58</div><div class="step-indent"> </div><div class="step-cell passed">* def updateAssessmentRequest = read('../../municipal-services/requestPayload/property-services/updateAssessment.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="59"><div class="step-ref passed">59</div><div class="step-indent"> </div><div class="step-cell passed">* def searchAssessmentRequest = read('../../municipal-services/requestPayload/property-services/searchAssessment.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="60"><div class="step-ref passed">60</div><div class="step-indent"> </div><div class="step-cell passed">* def searchPropertyRequest = read('../../common-services/requestPayload/common/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="61"><div class="step-ref passed">61</div><div class="step-indent"> </div><div class="step-cell passed">* def transferOwnershipRequest = read('../../municipal-services/requestPayload/property-services/ownership.json')</div></div><div class="time-cell passed">27</div></div><div class="step-row"><div class="step-container" id="62"><div class="step-ref passed">62</div><div class="step-indent"> </div><div class="step-cell passed">* def pgServicesSearchPayload = read('../../core-services/requestPayload/pg-service/pgServicesSearch.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="63"><div class="step-ref passed">63</div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTRequest = read('../../municipal-services/requestPayload/property-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="64"><div class="step-ref passed">64</div><div class="step-indent"> </div><div class="step-cell passed">Given url createpropertyUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="65"><div class="step-ref passed">65</div><div class="step-indent"> </div><div class="step-cell passed">And request createPropertyRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="66"><div class="step-ref passed">66</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">872</div></div><div class="step-row"><div class="step-container" id="67"><div class="step-ref passed">67</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="68"><div class="step-ref passed">68</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyServiceResponseHeaders = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="69"><div class="step-ref passed">69</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyServiceResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="70"><div class="step-ref passed">70</div><div class="step-indent"> </div><div class="step-cell passed">And def Property = propertyServiceResponseBody.Properties[0]</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="71"><div class="step-ref passed">71</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyId = Property.propertyId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="72"><div class="step-ref passed">72</div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = propertyId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="73"><div class="step-ref passed">73</div><div class="step-indent"> </div><div class="step-cell passed">And def acknowldgementNumber = Property.acknowldgementNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="74"><div class="step-ref passed">74</div><div class="step-indent"> </div><div class="step-cell passed">And def businessId = acknowldgementNumber</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="75"><div class="step-ref passed">75</div><div class="step-indent"> </div><div class="step-cell passed">And def alternatemobileNumber = Property.owners[0].alternatemobilenumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="76"><div class="step-ref passed">76</div><div class="step-indent"> </div><div class="step-cell passed">And def propertytenantId = Property.tenantId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="77"><div class="step-ref passed">77</div><div class="step-indent"> </div><div class="step-cell passed">And def alternatemobileNumberDetails = Property.alternateMobileNumberDetails</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="78"><div class="step-ref passed">78</div><div class="step-indent"> </div><div class="step-cell passed">And def alternateUpdated = Property.AlternateUpdated</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="79"><div class="step-ref passed">79</div><div class="step-indent"> </div><div class="step-cell passed">And def doorNo = Property.address.doorNo</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="80"><div class="step-ref passed">80</div><div class="step-indent"> </div><div class="step-cell passed">And def ownerName = Property.owners[0].name</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="81"><div class="step-ref passed">81</div><div class="step-indent"> </div><div class="step-cell passed">And def locality = Property.address.locality.code</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Initializing search query params</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="82"><div class="step-ref passed">82</div><div class="step-cell passed">* def searchPropertyParams = { tenantId: '#(tenantId)', doorNo:'#(doorNo)', name:'#(ownerName)', locality:'#(locality)'}</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Search a property</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="83"><div class="step-ref passed">83</div><div class="step-cell passed">* call read('../../municipal-services/pretests/propertyServicesPretest.feature@searhByPTIDSuccessfully')</div></div><div class="time-cell passed">27</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Validate response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="84"><div class="step-ref passed">84</div><div class="step-cell passed">* match propertyServiceResponseBody.Properties[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="85"><div class="step-ref passed">85</div><div class="step-cell passed">* match propertyServiceResponseBody.Properties[0].propertyId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="86"><div class="step-ref passed">86</div><div class="step-cell passed">* match propertyServiceResponseBody.Properties[0].status == "INWORKFLOW"</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="87"><div class="step-ref passed">87</div><div class="step-cell passed">* match propertyServiceResponseBody.Properties[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div></div><div class="scenario"><div class="scenario-heading" id="[48:598]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">negative</a><a class="badge badge-primary" href="karate-tags.html">propertyServices</a><a class="badge badge-primary" href="karate-tags.html">municipalServices</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">Property_search_By_PTDetails</a><a class="badge badge-primary" href="karate-tags.html">Property_search_By_PTDetails_without_locality</a><a class="badge badge-primary" href="karate-tags.html">digit_2_7</a><a class="badge badge-primary" href="karate-tags.html">propertyServiceSearch</a></div><span class="scenario-keyword">Scenario: [48:598]</span><span class="scenario-name">Search Property without locality </span></div><div class="scenario-time passed">ms: 1073</div></div><div class="step-row"><div class="step-container" id="[48:598]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="88"><div class="step-ref bg-step">88</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">8</div></div><div class="preformatted" data-parent="88">15:14:23.636 karate.env:  
15:14:23.636 locale: en_IN 
15:14:23.637 tenantId: pb.amritsar</div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="89"><div class="step-ref bg-step">89</div><div class="step-cell passed">* def Collections = Java.type('java.util.Collections')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="90"><div class="step-ref bg-step">90</div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="91"><div class="step-ref bg-step">91</div><div class="step-cell passed">* def propertyServicesConstants = read('../../municipal-services/constants/propertyServices.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="92"><div class="step-ref bg-step">92</div><div class="step-cell passed">* def hierarchyTypeCode = commonConstants.parameters.hierarchyTypeCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="93"><div class="step-ref bg-step">93</div><div class="step-cell passed">* def boundaryType = commonConstants.parameters.boundaryType</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># Searching Location for locality and areaCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="94"><div class="step-ref bg-step">94</div><div class="step-cell passed">* call read('../../core-services/pretests/location.feature@searchLocationSuccessfully')</div></div><div class="time-cell passed">554</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="94.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/municipal-services/tests/../../core-services/pretests/location.feature</div></div><div class="time-cell passed">549</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="95"><div class="step-ref bg-step">95</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="96"><div class="step-ref bg-step">96</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="97"><div class="step-ref bg-step">97</div><div class="step-indent"> </div><div class="step-cell passed">* def locationconstant = read('../../core-services/constants/location.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="98"><div class="step-ref bg-step">98</div><div class="step-indent"> </div><div class="step-cell passed">* def locationPayload = read('../../core-services/requestPayload/location/searchLocation.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="99"><div class="step-ref bg-step">99</div><div class="step-indent"> </div><div class="step-cell passed">* def locationParam =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="99">{
 hierarchyTypeCode: '#(hierarchyTypeCode)',
 boundaryType: '#(boundaryType)',
 tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="100"><div class="step-ref bg-step">100</div><div class="step-indent"> </div><div class="step-cell passed">Given url searchloc</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="101"><div class="step-ref bg-step">101</div><div class="step-indent"> </div><div class="step-cell passed">And params locationParam</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="102"><div class="step-ref bg-step">102</div><div class="step-indent"> </div><div class="step-cell passed">And request locationPayload</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="103"><div class="step-ref bg-step">103</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">537</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="104"><div class="step-ref bg-step">104</div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="105"><div class="step-ref bg-step">105</div><div class="step-indent"> </div><div class="step-cell passed">And def searchLocationResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="106"><div class="step-ref bg-step">106</div><div class="step-indent"> </div><div class="step-cell passed">And def searchLocationResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="107"><div class="step-ref bg-step">107</div><div class="step-cell passed">* def localityCode = searchLocationResponseBody.TenantBoundary[0].boundary[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="108"><div class="step-ref bg-step">108</div><div class="step-cell passed">* def areaCode = searchLocationResponseBody.TenantBoundary[0].boundary[0].area</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="109"><div class="step-ref bg-step">109</div><div class="step-cell passed">* def localityName = searchLocationResponseBody.TenantBoundary[0].boundary[0].name + ', ' + cityCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># initialising request payload variables</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="110"><div class="step-ref bg-step">110</div><div class="step-cell passed">* def financialYear = commonConstants.parameters.financialYear</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="111"><div class="step-ref bg-step">111</div><div class="step-cell passed">* def assessmentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="112"><div class="step-ref bg-step">112</div><div class="step-cell passed">* def source = commonConstants.parameters.source</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="113"><div class="step-ref bg-step">113</div><div class="step-cell passed">* def channel = commonConstants.parameters.channel</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="114"><div class="step-ref bg-step">114</div><div class="step-cell passed">* def relationship = commonConstants.parameters.relationship[randomNumber(commonConstants.parameters.relationship.length)]</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="115"><div class="step-ref bg-step">115</div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="116"><div class="step-ref bg-step">116</div><div class="step-cell passed">* def cityName = karate.jsonPath(mdmsStatetenant, "$.tenants[?(@.code=='" + tenantId + "')].name")[0]</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="117"><div class="step-ref bg-step">117</div><div class="step-cell passed">* def OccupancyType = mdmsStatePropertyTax.OccupancyType[1].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="118"><div class="step-ref bg-step">118</div><div class="step-cell passed">* def UsageCategory = mdmsStatePropertyTax.UsageCategory[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="119"><div class="step-ref bg-step">119</div><div class="step-cell passed">* def builtUpArea = 2000</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="120"><div class="step-ref bg-step">120</div><div class="step-cell passed">* def UsageCategoryMajor = mdmsStatePropertyTax.UsageCategoryMajor[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="121"><div class="step-ref bg-step">121</div><div class="step-cell passed">* def landArea = 800</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="122"><div class="step-ref bg-step">122</div><div class="step-cell passed">* def PropertyType = mdmsStatePropertyTax.PropertyType[3].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="123"><div class="step-ref bg-step">123</div><div class="step-cell passed">* def noOfFloors = 1</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="124"><div class="step-ref bg-step">124</div><div class="step-cell passed">* def OwnerShipCategory = mdmsStatePropertyTax.OwnerShipCategory[3].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="125"><div class="step-ref bg-step">125</div><div class="step-cell passed">* def name = randomString(10)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="126"><div class="step-ref bg-step">126</div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="127"><div class="step-ref bg-step">127</div><div class="step-cell passed">* def fatherOrHusbandName = randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="128"><div class="step-ref bg-step">128</div><div class="step-cell passed">* def relationship = commonConstants.parameters.relationship[randomNumber(commonConstants.parameters.relationship.length)]</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="129"><div class="step-ref bg-step">129</div><div class="step-cell passed">* def OwnerType = mdmsStatePropertyTax.OwnerType[5].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="130"><div class="step-ref bg-step">130</div><div class="step-cell passed">* def gender = commonConstants.parameters.gender[randomNumber(commonConstants.parameters.gender.length)]</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="131"><div class="step-ref bg-step">131</div><div class="step-cell passed">* def isCorrespondenceAddress = true</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="132"><div class="step-ref bg-step">132</div><div class="step-cell passed">* def source = commonConstants.parameters.source</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="133"><div class="step-ref bg-step">133</div><div class="step-cell passed">* def channel = commonConstants.parameters.channel</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="134"><div class="step-ref bg-step">134</div><div class="step-cell passed">* def addressProofDocumentType0 = mdmsStatePropertyTax.Documents[0].dropdownData[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="135"><div class="step-ref bg-step">135</div><div class="step-cell passed">* def addressProofDocumentType1 = mdmsStatePropertyTax.Documents[1].dropdownData[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="136"><div class="step-ref bg-step">136</div><div class="step-cell passed">* def addressProofDocumentType2 = mdmsStatePropertyTax.Documents[2].dropdownData[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="137"><div class="step-ref bg-step">137</div><div class="step-cell passed">* def addressProofDocumentType3 = mdmsStatePropertyTax.Documents[3].dropdownData[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="138"><div class="step-ref bg-step">138</div><div class="step-cell passed">* def addressProofDocumentType4 = mdmsStatePropertyTax.Documents[4].dropdownData[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="139"><div class="step-ref bg-step">139</div><div class="step-cell passed">* def creationReason = commonConstants.parameters.creationReason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[48:598]bg"><div class="step-container" id="140"><div class="step-ref bg-step">140</div><div class="step-cell passed">* def businessService = mdmsStatePropertyTax.PTWorkflow[1].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Initializing search query params</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="141"><div class="step-ref passed">141</div><div class="step-cell passed">* def searchPropertyParams = { tenantId: 'abc', doorNo:'abc', name:'abc'}</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Search a property</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="142"><div class="step-ref passed">142</div><div class="step-cell passed">* call read('../../municipal-services/pretests/propertyServicesPretest.feature@searchByPTDetailsError')</div></div><div class="time-cell passed">460</div></div><div class="step-row"><div class="step-container" id="142.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/municipal-services/tests/../../municipal-services/pretests/propertyServicesPretest.feature</div></div><div class="time-cell passed">445</div></div><div class="step-row"><div class="step-container" id="143"><div class="step-ref passed">143</div><div class="step-indent"> </div><div class="step-cell passed">* def createPropertyRequest = read('../../municipal-services/requestPayload/property-services/create.json')</div></div><div class="time-cell passed">20</div></div><div class="step-row"><div class="step-container" id="144"><div class="step-ref passed">144</div><div class="step-indent"> </div><div class="step-cell passed">* def updatePropertyRequest = read('../../municipal-services/requestPayload/property-services/update.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="145"><div class="step-ref passed">145</div><div class="step-indent"> </div><div class="step-cell passed">* def createAssessmentRequest = read('../../municipal-services/requestPayload/property-services/createAssessment.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="146"><div class="step-ref passed">146</div><div class="step-indent"> </div><div class="step-cell passed">* def updateAssessmentRequest = read('../../municipal-services/requestPayload/property-services/updateAssessment.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="147"><div class="step-ref passed">147</div><div class="step-indent"> </div><div class="step-cell passed">* def searchAssessmentRequest = read('../../municipal-services/requestPayload/property-services/searchAssessment.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="148"><div class="step-ref passed">148</div><div class="step-indent"> </div><div class="step-cell passed">* def searchPropertyRequest = read('../../common-services/requestPayload/common/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="149"><div class="step-ref passed">149</div><div class="step-indent"> </div><div class="step-cell passed">* def transferOwnershipRequest = read('../../municipal-services/requestPayload/property-services/ownership.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container" id="150"><div class="step-ref passed">150</div><div class="step-indent"> </div><div class="step-cell passed">* def pgServicesSearchPayload = read('../../core-services/requestPayload/pg-service/pgServicesSearch.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="151"><div class="step-ref passed">151</div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTRequest = read('../../municipal-services/requestPayload/property-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="152"><div class="step-ref passed">152</div><div class="step-indent"> </div><div class="step-cell passed">Given url searchPropertyUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="153"><div class="step-ref passed">153</div><div class="step-indent"> </div><div class="step-cell passed">And params searchPropertyParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="154"><div class="step-ref passed">154</div><div class="step-indent"> </div><div class="step-cell passed">And request searchPTRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="155"><div class="step-ref passed">155</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">387</div></div><div class="step-row"><div class="step-container" id="156"><div class="step-ref passed">156</div><div class="step-indent"> </div><div class="step-cell passed">Then status 400</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="157"><div class="step-ref passed">157</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyServiceResponseHeaders = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="158"><div class="step-ref passed">158</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyServiceResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Validate response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="159"><div class="step-ref passed">159</div><div class="step-cell passed">* match propertyServiceResponseBody.Errors[0].message == propertyServicesConstants.errorMessages.noLocalityOpenSearch</div></div><div class="time-cell passed">4</div></div></div><div class="scenario"><div class="scenario-heading" id="[49:607]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">negative</a><a class="badge badge-primary" href="karate-tags.html">Property_search_By_PTDetails_Error</a><a class="badge badge-primary" href="karate-tags.html">propertyServices</a><a class="badge badge-primary" href="karate-tags.html">municipalServices</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">Property_search_By_PTDetails</a><a class="badge badge-primary" href="karate-tags.html">digit_2_7</a><a class="badge badge-primary" href="karate-tags.html">propertyServiceSearch</a></div><span class="scenario-keyword">Scenario: [49:607]</span><span class="scenario-name">Search Property with invalid property details </span></div><div class="scenario-time passed">ms: 720</div></div><div class="step-row"><div class="step-container" id="[49:607]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="160"><div class="step-ref bg-step">160</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">7</div></div><div class="preformatted" data-parent="160">15:14:24.768 karate.env:  
15:14:24.768 locale: en_IN 
15:14:24.769 tenantId: pb.amritsar</div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="161"><div class="step-ref bg-step">161</div><div class="step-cell passed">* def Collections = Java.type('java.util.Collections')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="162"><div class="step-ref bg-step">162</div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="163"><div class="step-ref bg-step">163</div><div class="step-cell passed">* def propertyServicesConstants = read('../../municipal-services/constants/propertyServices.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="164"><div class="step-ref bg-step">164</div><div class="step-cell passed">* def hierarchyTypeCode = commonConstants.parameters.hierarchyTypeCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="165"><div class="step-ref bg-step">165</div><div class="step-cell passed">* def boundaryType = commonConstants.parameters.boundaryType</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># Searching Location for locality and areaCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="166"><div class="step-ref bg-step">166</div><div class="step-cell passed">* call read('../../core-services/pretests/location.feature@searchLocationSuccessfully')</div></div><div class="time-cell passed">319</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="166.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/municipal-services/tests/../../core-services/pretests/location.feature</div></div><div class="time-cell passed">312</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="167"><div class="step-ref bg-step">167</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="168"><div class="step-ref bg-step">168</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="169"><div class="step-ref bg-step">169</div><div class="step-indent"> </div><div class="step-cell passed">* def locationconstant = read('../../core-services/constants/location.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="170"><div class="step-ref bg-step">170</div><div class="step-indent"> </div><div class="step-cell passed">* def locationPayload = read('../../core-services/requestPayload/location/searchLocation.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="171"><div class="step-ref bg-step">171</div><div class="step-indent"> </div><div class="step-cell passed">* def locationParam =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="171">{
 hierarchyTypeCode: '#(hierarchyTypeCode)',
 boundaryType: '#(boundaryType)',
 tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="172"><div class="step-ref bg-step">172</div><div class="step-indent"> </div><div class="step-cell passed">Given url searchloc</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="173"><div class="step-ref bg-step">173</div><div class="step-indent"> </div><div class="step-cell passed">And params locationParam</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="174"><div class="step-ref bg-step">174</div><div class="step-indent"> </div><div class="step-cell passed">And request locationPayload</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="175"><div class="step-ref bg-step">175</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">300</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="176"><div class="step-ref bg-step">176</div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="177"><div class="step-ref bg-step">177</div><div class="step-indent"> </div><div class="step-cell passed">And def searchLocationResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="178"><div class="step-ref bg-step">178</div><div class="step-indent"> </div><div class="step-cell passed">And def searchLocationResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="179"><div class="step-ref bg-step">179</div><div class="step-cell passed">* def localityCode = searchLocationResponseBody.TenantBoundary[0].boundary[0].code</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="180"><div class="step-ref bg-step">180</div><div class="step-cell passed">* def areaCode = searchLocationResponseBody.TenantBoundary[0].boundary[0].area</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="181"><div class="step-ref bg-step">181</div><div class="step-cell passed">* def localityName = searchLocationResponseBody.TenantBoundary[0].boundary[0].name + ', ' + cityCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># initialising request payload variables</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="182"><div class="step-ref bg-step">182</div><div class="step-cell passed">* def financialYear = commonConstants.parameters.financialYear</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="183"><div class="step-ref bg-step">183</div><div class="step-cell passed">* def assessmentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="184"><div class="step-ref bg-step">184</div><div class="step-cell passed">* def source = commonConstants.parameters.source</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="185"><div class="step-ref bg-step">185</div><div class="step-cell passed">* def channel = commonConstants.parameters.channel</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="186"><div class="step-ref bg-step">186</div><div class="step-cell passed">* def relationship = commonConstants.parameters.relationship[randomNumber(commonConstants.parameters.relationship.length)]</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="187"><div class="step-ref bg-step">187</div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="188"><div class="step-ref bg-step">188</div><div class="step-cell passed">* def cityName = karate.jsonPath(mdmsStatetenant, "$.tenants[?(@.code=='" + tenantId + "')].name")[0]</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="189"><div class="step-ref bg-step">189</div><div class="step-cell passed">* def OccupancyType = mdmsStatePropertyTax.OccupancyType[1].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="190"><div class="step-ref bg-step">190</div><div class="step-cell passed">* def UsageCategory = mdmsStatePropertyTax.UsageCategory[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="191"><div class="step-ref bg-step">191</div><div class="step-cell passed">* def builtUpArea = 2000</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="192"><div class="step-ref bg-step">192</div><div class="step-cell passed">* def UsageCategoryMajor = mdmsStatePropertyTax.UsageCategoryMajor[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="193"><div class="step-ref bg-step">193</div><div class="step-cell passed">* def landArea = 800</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="194"><div class="step-ref bg-step">194</div><div class="step-cell passed">* def PropertyType = mdmsStatePropertyTax.PropertyType[3].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="195"><div class="step-ref bg-step">195</div><div class="step-cell passed">* def noOfFloors = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="196"><div class="step-ref bg-step">196</div><div class="step-cell passed">* def OwnerShipCategory = mdmsStatePropertyTax.OwnerShipCategory[3].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="197"><div class="step-ref bg-step">197</div><div class="step-cell passed">* def name = randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="198"><div class="step-ref bg-step">198</div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="199"><div class="step-ref bg-step">199</div><div class="step-cell passed">* def fatherOrHusbandName = randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="200"><div class="step-ref bg-step">200</div><div class="step-cell passed">* def relationship = commonConstants.parameters.relationship[randomNumber(commonConstants.parameters.relationship.length)]</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="201"><div class="step-ref bg-step">201</div><div class="step-cell passed">* def OwnerType = mdmsStatePropertyTax.OwnerType[5].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="202"><div class="step-ref bg-step">202</div><div class="step-cell passed">* def gender = commonConstants.parameters.gender[randomNumber(commonConstants.parameters.gender.length)]</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="203"><div class="step-ref bg-step">203</div><div class="step-cell passed">* def isCorrespondenceAddress = true</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="204"><div class="step-ref bg-step">204</div><div class="step-cell passed">* def source = commonConstants.parameters.source</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="205"><div class="step-ref bg-step">205</div><div class="step-cell passed">* def channel = commonConstants.parameters.channel</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="206"><div class="step-ref bg-step">206</div><div class="step-cell passed">* def addressProofDocumentType0 = mdmsStatePropertyTax.Documents[0].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="207"><div class="step-ref bg-step">207</div><div class="step-cell passed">* def addressProofDocumentType1 = mdmsStatePropertyTax.Documents[1].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="208"><div class="step-ref bg-step">208</div><div class="step-cell passed">* def addressProofDocumentType2 = mdmsStatePropertyTax.Documents[2].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="209"><div class="step-ref bg-step">209</div><div class="step-cell passed">* def addressProofDocumentType3 = mdmsStatePropertyTax.Documents[3].dropdownData[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="210"><div class="step-ref bg-step">210</div><div class="step-cell passed">* def addressProofDocumentType4 = mdmsStatePropertyTax.Documents[4].dropdownData[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="211"><div class="step-ref bg-step">211</div><div class="step-cell passed">* def creationReason = commonConstants.parameters.creationReason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[49:607]bg"><div class="step-container" id="212"><div class="step-ref bg-step">212</div><div class="step-cell passed">* def businessService = mdmsStatePropertyTax.PTWorkflow[1].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Initializing search query params</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="213"><div class="step-ref passed">213</div><div class="step-cell passed">* def searchPropertyParams = { tenantId: 'abc', propertyIds: 'abc', doorNo:'doorNo', name:'ownerName', locality:'locality'}</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Search a property</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="214"><div class="step-ref passed">214</div><div class="step-cell passed">* call read('../../municipal-services/pretests/propertyServicesPretest.feature@searchPropertyForEmptyResult')</div></div><div class="time-cell passed">337</div></div><div class="step-row"><div class="step-container" id="214.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/municipal-services/tests/../../municipal-services/pretests/propertyServicesPretest.feature</div></div><div class="time-cell passed">314</div></div><div class="step-row"><div class="step-container" id="215"><div class="step-ref passed">215</div><div class="step-indent"> </div><div class="step-cell passed">* def createPropertyRequest = read('../../municipal-services/requestPayload/property-services/create.json')</div></div><div class="time-cell passed">31</div></div><div class="step-row"><div class="step-container" id="216"><div class="step-ref passed">216</div><div class="step-indent"> </div><div class="step-cell passed">* def updatePropertyRequest = read('../../municipal-services/requestPayload/property-services/update.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="217"><div class="step-ref passed">217</div><div class="step-indent"> </div><div class="step-cell passed">* def createAssessmentRequest = read('../../municipal-services/requestPayload/property-services/createAssessment.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="218"><div class="step-ref passed">218</div><div class="step-indent"> </div><div class="step-cell passed">* def updateAssessmentRequest = read('../../municipal-services/requestPayload/property-services/updateAssessment.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="219"><div class="step-ref passed">219</div><div class="step-indent"> </div><div class="step-cell passed">* def searchAssessmentRequest = read('../../municipal-services/requestPayload/property-services/searchAssessment.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="220"><div class="step-ref passed">220</div><div class="step-indent"> </div><div class="step-cell passed">* def searchPropertyRequest = read('../../common-services/requestPayload/common/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="221"><div class="step-ref passed">221</div><div class="step-indent"> </div><div class="step-cell passed">* def transferOwnershipRequest = read('../../municipal-services/requestPayload/property-services/ownership.json')</div></div><div class="time-cell passed">22</div></div><div class="step-row"><div class="step-container" id="222"><div class="step-ref passed">222</div><div class="step-indent"> </div><div class="step-cell passed">* def pgServicesSearchPayload = read('../../core-services/requestPayload/pg-service/pgServicesSearch.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="223"><div class="step-ref passed">223</div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTRequest = read('../../municipal-services/requestPayload/property-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="224"><div class="step-ref passed">224</div><div class="step-indent"> </div><div class="step-cell passed">Given url searchPropertyUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="225"><div class="step-ref passed">225</div><div class="step-indent"> </div><div class="step-cell passed">And params searchPropertyParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="226"><div class="step-ref passed">226</div><div class="step-indent"> </div><div class="step-cell passed">And request searchPropertyRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="227"><div class="step-ref passed">227</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">234</div></div><div class="step-row"><div class="step-container" id="228"><div class="step-ref passed">228</div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="229"><div class="step-ref passed">229</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyServiceResponseHeaders = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="230"><div class="step-ref passed">230</div><div class="step-indent"> </div><div class="step-cell passed">And def propertyServiceResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># Validate response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="231"><div class="step-ref passed">231</div><div class="step-cell passed">* match propertyServiceResponseBody.Properties.size() == 0</div></div><div class="time-cell passed">3</div></div></div></div>
    </div>   
  </body>
</html>